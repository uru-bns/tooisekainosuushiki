<?php

require_once './rpn.php';

class TooisekainosuushikiTest extends PHPUnit_Framework_TestCase
{
  private $_operators_order_by_priority = ['|', '&', '+', '*'];

  private $_test_data_set = [
    ["4*5+6&7|8", "44" ],
    ["15*5", "75" ],
    ["15+5", "20" ],
    ["15&5", "5" ],
    ["15|5", "15" ],
    ["30*15*5", "2250" ],
    ["30*15+5", "600" ],
    ["30*15&5", "150" ],
    ["30*15|5", "450" ],
    ["30+15*5", "225" ],
    [ "30+15+5", "50" ],
    [ "30+15&5", "35" ],
    [ "30+15|5", "45" ],
    [ "30&15*5", "70" ],
    [ "30&15+5", "19" ],
    [ "30&15&5", "4" ],
    [ "30&15|5", "14" ],
    [ "30|15*5", "155" ],
    [ "30|15+5", "36" ],
    [ "30|15&5", "5" ],
    [ "30|15|5", "31" ],
    [ "1+2+3+4+5+6+7+8+9+10", "55" ],
    [ "1*2*3*4*5*6*7*8*9*10", "3628800" ],
    [ "1+2+3+4+5*6+7+8+9+10", "600" ],
    [ "1*2*3*4*5+6*7*8*9*10", "1330560" ],
    [ "1|2|4|8|16|32|64|128|256|512", "1023" ],
    [ "2046&2045&2043&2039&2031&2015&1983&1919&1791&1535", "1024" ],
    [ "3|0*6&0", "0" ],
    [ "6&9|2+4", "6" ],
    [ "9+5&0*0", "0" ],
    [ "0|8+4+2*9", "126" ],
    [ "63|75+35*53", "8586" ],
    [ "29+14|50&68*87", "2871" ],
    [ "7&26+25&22|9+67", "94" ],
    [ "19|8583&53+34&32", "53" ],
    [ "313&513+896|316*209", "200013" ],
    [ "0|3+4*9+3|9|1&2&5*4&0", "0" ],
    [ "59+26&76*71&87|39|43*76", "361532" ],
    [ "714*706&728&738+670+657", "1450134" ],
    [ "30|7*57|2+7|7+91850&32&94", "2046" ],
    [ "89+27*43|1|82&94*96|26+84", "2150640" ],
    [ "99782&561*68|369137+80&41", "0" ],
    [ "6602&5785|2288+2|7424+1527", "15297" ],
    [ "166*648&288|418+778|279*655", "100792710" ],
    [ "70*13+36&23+22+66|92|95*53&9", "9380" ],
    [ "23+174&56&179408|6727*724*626", "10424152" ],
    [ "13&84&43*6+77|56+59|15&24+9*66", "0" ],
    [ "928&728*151+695&321*369|845+771", "161873920" ],
    [ "5984|86*8519&43184&7183+401*48|6629+97|852", "18135297180" ],
    [ "217|999&112+511+357+514&98*796|718*715|442&682", "663026760" ],
    [ "461&424&462+557+855|656|924*234*557&451*884|322", "402208560" ]
  ];

  public function test_calculate()
  {
    $operators_order_by_logic_friendly =
      array_reverse($this->_operators_order_by_priority);

    foreach ($this->_test_data_set as $test_data) {
      $this->assertEquals(
        $test_data[1],
        calculate($test_data[0], $operators_order_by_logic_friendly)
      );
    }
  }
}


